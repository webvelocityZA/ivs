<div class="p-4 px-10 md:px-28">
  <div class="text-center my-14">
    <span class="text-3xl font-semibold text-center">SELF REGISTRATION</span>
  </div>
  <mat-tab-group mat-align-tabs="center" [(selectedIndex)]="IVSTabIndex">
    <mat-tab [disabled]='IVSTabIndex < 0' label="Payment Details">
      <div class="py-4">
        <form #registerForm="ngForm" (submit)="registerPatient(registerForm)" class="mt-6">
          <div class="w-full md:w-full md:px-2 inline-block">
            <mat-form-field appearance="outline">
              <mat-label>ID Number</mat-label>
              <input matInput placeholder="ID Number" name="idNumber" ngModel #idNumberInput="ngModel" required idNumber (ngModelChange)="checkIfIDExists($event)">
              <mat-icon *ngIf="userExists" class="text-green-600" matSuffix>sentiment_very_satisfied</mat-icon>
              <mat-error *ngIf="idNumberInput.hasError('required')">ID Number is required</mat-error>
              <!-- <mat-error *ngIf="idNumberInput.value?.length == 5">{{idNumberInput.value?.length || 0}}A valid South African ID should be 13 characters long</mat-error> -->
            </mat-form-field>
          </div>
          <div class="w-full md:w-1/2 md:px-2 inline-block">
            <mat-form-field appearance="outline">
              <mat-label>First Name</mat-label>
              <input matInput placeholder="First Name" name="firstName" ngModel #firstNameInput="ngModel" required firstName [disabled]="userExists">
              <mat-icon matSuffix>perm_identity</mat-icon>
              <mat-error *ngIf="firstNameInput.hasError('required')">First Name is required</mat-error>
            </mat-form-field>
          </div>
          <div class="w-full md:w-1/2 md:px-2 inline-block">
            <mat-form-field appearance="outline">
              <mat-label>Last Name</mat-label>
              <input matInput placeholder="Last Name" name="lastName" ngModel #lastNameInput="ngModel" required lastName [disabled]="userExists">
              <mat-icon matSuffix>perm_identity</mat-icon>
              <mat-error *ngIf="lastNameInput.hasError('required')">Last Name is required</mat-error>
            </mat-form-field>
          </div>
          <div class="w-full md:w-1/2 md:px-2 inline-block">
            <mat-form-field appearance="outline">
              <mat-label>Employer</mat-label>
              <input matInput placeholder="Employer" type="text" name="employer" ngModel #employerInput="ngModel" required employer [disabled]="userExists">
              <mat-icon matSuffix>perm_identity</mat-icon>
              <mat-error *ngIf="employerInput.hasError('required')">Employer is required</mat-error>
            </mat-form-field>
          </div>
          <div class="w-full md:w-1/2 md:px-2 inline-block">
            <mat-form-field appearance="outline">
              <mat-label>Position</mat-label>
              <input matInput placeholder="Position" type="text" name="position" ngModel #positionInput="ngModel" required position [disabled]="userExists">
              <mat-icon matSuffix>meeting_room</mat-icon>
              <mat-error *ngIf="positionInput.hasError('required')">Current Position is required</mat-error>
            </mat-form-field>
          </div>
          <div class="w-full md:w-1/2 md:px-2 inline-block">
            <mat-form-field appearance="outline">
              <mat-label>Medical Aid Number</mat-label>
              <input matInput placeholder="Medical Aid Number" min="0" name="medicalAidNumber" ngModel #medicalAidNumberInput="ngModel" required medical_aid_number [disabled]="userExists">
              <mat-icon matSuffix>local_hospital</mat-icon>
              <mat-error *ngIf="medicalAidNumberInput.hasError('required')">Medical Aid Number is required</mat-error>
            </mat-form-field>
          </div>
        </form>
      </div>

      <div class="mx-2">
        <button mat-raised-button color="primary" type="submit" (click)="registerPatient(registerForm)">Continue</button>
      </div>

    </mat-tab>
    <mat-tab [disabled]='IVSTabIndex < 1' label="Medical History">
      <mat-form-field appearance="fill"
        hideRequiredMarker="false"
        floatLabel="Allergies & Chronic Medication">
      <mat-select [(ngModel)]="allergies" (ngModelChange)="doesPatientHaveAllergies($event)" required>
        <mat-option>Please Select</mat-option>
        <mat-option value="yes">Yes</mat-option>
        <mat-option value="no">No</mat-option>
      </mat-select>
      <mat-label>Allergies & Chronic Medication</mat-label>
    </mat-form-field>

    <div class="w-full md:w-full block" *ngIf="allergies === 'yes'">
      <mat-form-field appearance="outline">
        <mat-label>Description</mat-label>
        <textarea matInput placeholder="Description" name="description" [(ngModel)]="allergiesDescription"></textarea>
        <!-- <mat-hint>Hint</mat-hint> -->
      </mat-form-field>
    </div>
    <div class="mx-2">
      <button mat-raised-button color="primary" type="submit" (click)="registerPatient(registerForm)">Complete Registration</button>
    </div>
    </mat-tab>
    <!-- <mat-tab [disabled]='IVSTabIndex < 2' label="Payment Details">
      <button mat-raised-button color="accent" (click)="navToTab()">Tab Demo 1!</button>
    </mat-tab>
    <mat-tab [disabled]='IVSTabIndex < 3' label="Medical History">
      <button mat-raised-button color="accent" (click)="navToTab()">Tab Demo 1!</button>
    </mat-tab> -->
  </mat-tab-group>
</div>

